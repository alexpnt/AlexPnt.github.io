var searchFunc=function(e,i,l){$.ajax({url:e,dataType:"xml",success:function(e){var r,n=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("link",this).attr("href")}}).get(),t=document.getElementById(i);t&&(r=document.getElementById(l),t.addEventListener("input",function(){var m=[],d=function(e){for(var t,r=[],n=0;n<e.length;n++)for(t=n+1;t<e.length+1;t++)r.push(e.slice(n,t).join(" "));return r}(this.value.trim().toLowerCase().split(" ")).sort(function(e,t){return t.split(" ").length-e.split(" ").length});if(r.innerHTML="",!(this.value.trim().length<=0)&&(n.forEach(function(e){var t=0;e.title&&""!==e.title.trim()||(e.title="Untitled");var r,n,i,l,s,a,c=e.title.trim().toLowerCase(),u=c.toLowerCase(),o=e.content.trim().replace(/<style([\s\S]*?)<\/style>/gi,"").replace(/<script([\s\S]*?)<\/script>/gi,"").replace(/<figure([\s\S]*?)<\/figure>/gi,"").replace(/<\/div>/gi,"\n").replace(/<\/li>/gi,"\n").replace(/<li>/gi,"  *  ").replace(/<\/ul>/gi,"\n").replace(/<\/p>/gi,"\n").replace(/<br\s*[\/]?>/gi,"\n").replace(/<[^>]+>/gi,""),g=o.toLowerCase(),h=e.url,p=-1,f=-1;""!==o&&d.forEach(function(e){r=u.indexOf(e),p=g.indexOf(e),(0<=r||0<=p)&&(t+=1,p<0&&(p=0),f<0&&(f=p))}),0<t&&((n={}).rank=t,n.str="<li><a href='"+h+"' class='search-result-title'>"+c+"</a>",0<=f&&(l=f+80,(i=f-20)<0&&(i=0),0==i&&(l=100),l>o.length&&(l=o.length),a=o.substring(i,l),s=new RegExp(d.join("|"),"gi"),a=a.replace(s,function(e){return'<em class="search-keyword">'+e+"</em>"}),n.str+='<p class="search-result">'+a+"...</p>"),n.str+="</li>",m.push(n))}),m.length)){m.sort(function(e,t){return t.rank-e.rank});for(var e='<ul class="search-result-list">',t=0;t<m.length;t++)e+=m[t].str;e+="</ul>",r.innerHTML=e}}))}})};